<div class="min-h-screen bg-white relative overflow-hidden">
  <!-- Background Pattern -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-0 right-0 w-96 h-96 bg-blue-50 rounded-full blur-3xl opacity-50"></div>
    <div class="absolute bottom-0 left-0 w-96 h-96 bg-indigo-50 rounded-full blur-3xl opacity-50"></div>
    <!-- Dotted Pattern -->
    <div class="absolute top-10 right-10 w-32 h-32 opacity-10">
      <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <pattern id="dots" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
            <circle cx="2" cy="2" r="1" fill="currentColor" class="text-blue-600"/>
          </pattern>
        </defs>
        <rect width="100%" height="100%" fill="url(#dots)"/>
      </svg>
    </div>
  </div>

  <!-- Header -->
  <div class="relative z-10 flex items-center justify-between px-6 py-4">
    <div class="text-2xl font-bold text-gray-900">
      certmanager<span class="text-blue-600">_</span>
    </div>
    <a routerLink="/" class="text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors">
      Back to home
    </a>
  </div>

  <!-- Main Content -->
  <div class="relative z-10 flex items-center justify-center min-h-[calc(100vh-80px)] px-4 py-12">
    <div class="w-full max-w-md">
      <!-- Card Container -->
      <div class="bg-white rounded-lg shadow-lg border border-gray-100 overflow-hidden">
        <!-- Tabs -->
        <div class="flex border-b border-gray-200">
          <button
            type="button"
            (click)="setActiveTab('login')"
            [class]="activeTab() === 'login'
              ? 'flex-1 py-4 px-6 text-sm font-medium text-blue-600 border-b-2 border-blue-600 bg-blue-50/50 transition-colors'
              : 'flex-1 py-4 px-6 text-sm font-medium text-gray-500 hover:text-gray-700 transition-colors'"
          >
            Login
          </button>
          <button
            type="button"
            (click)="setActiveTab('customer')"
            [class]="activeTab() === 'customer'
              ? 'flex-1 py-4 px-6 text-sm font-medium text-blue-600 border-b-2 border-blue-600 bg-blue-50/50 transition-colors'
              : 'flex-1 py-4 px-6 text-sm font-medium text-gray-500 hover:text-gray-700 transition-colors'"
          >
            Create Customer
          </button>
        </div>

        <!-- Content Area -->
        <div class="p-8">
          <!-- Notifications -->
          @if (errorMessage()) {
            <app-notification type="error" [message]="errorMessage()!" />
          }
          @if (warningMessage()) {
            <app-notification type="warning" [message]="warningMessage()!" />
          }
          @if (successMessage()) {
            <app-notification type="success" [message]="successMessage()!" />
          }

          <!-- Login Tab Content -->
          @if (activeTab() === 'login') {
            <app-login-form
              [form]="loginForm"
              [isLoading]="isLoading()"
              (onSubmit)="onLoginSubmit()"
            />
          }

          <!-- Customer Creation Tab Content -->
          @if (activeTab() === 'customer' && !showUserForm()) {
            <app-customer-form
              [form]="customerForm"
              [isLoading]="isLoading()"
              (onSubmit)="onCustomerSubmit()"
            />
          }

          <!-- User Creation Form (shown after customer creation) -->
          @if (showUserForm()) {
            <app-user-form
              [form]="userForm"
              [isLoading]="isLoading()"
              (onSubmit)="onUserSubmit()"
              (onSkip)="skipUserCreation()"
            />
          }

          <!-- Footer Link -->
          @if (activeTab() === 'login') {
            <div class="mt-6 text-center text-sm text-gray-600">
              <p>
                Don't have an account?
                <button
                  type="button"
                  (click)="setActiveTab('customer')"
                  class="text-blue-600 hover:text-blue-700 font-medium transition-colors"
                >
                  Create a free account!
                </button>
              </p>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
