<form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
  <!-- Error Message -->
  @if (errorMessage()) {
    <div class="border-l-[5px] border-red-500 bg-red-50 p-4 flex items-start gap-3">
      <div class="flex-shrink-0 mt-0.5">
        <svg class="h-5 w-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
        </svg>
      </div>
      <div class="flex-1">
        <p class="text-sm text-red-800">{{ errorMessage() }}</p>
      </div>
    </div>
  }

  <!-- Template Name -->
  <div>
    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">
      Template Name <span class="text-red-500">*</span>
    </label>
    <input
      id="name"
      type="text"
      formControlName="name"
      placeholder="Enter template name"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
      [class.border-red-500]="getFieldError('name')"
    />
    @if (getFieldError('name')) {
      <p class="mt-1 text-sm text-red-600">{{ getFieldError('name') }}</p>
    }
  </div>

  <!-- Code -->
  <div>
    <label for="code" class="block text-sm font-medium text-gray-700 mb-1">
      Code <span class="text-red-500">*</span>
    </label>
    <select
      id="code"
      formControlName="code"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
      [class.border-red-500]="getFieldError('code')"
    >
      @for (code of codes; track code) {
        <option [value]="code">{{ code }}</option>
      }
    </select>
    @if (getFieldError('code')) {
      <p class="mt-1 text-sm text-red-600">{{ getFieldError('code') }}</p>
    }
  </div>

  <!-- Category -->
  <div>
    <label for="category" class="block text-sm font-medium text-gray-700 mb-1">
      Category <span class="text-red-500">*</span>
    </label>
    <select
      id="category"
      formControlName="category"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
      [class.border-red-500]="getFieldError('category')"
    >
      @for (category of categories; track category) {
        <option [value]="category">{{ category }}</option>
      }
    </select>
    @if (getFieldError('category')) {
      <p class="mt-1 text-sm text-red-600">{{ getFieldError('category') }}</p>
    }
  </div>

  <!-- Description -->
  <div>
    <label for="description" class="block text-sm font-medium text-gray-700 mb-1">
      Description
    </label>
    <textarea
      id="description"
      formControlName="description"
      rows="4"
      placeholder="Enter template description (optional)"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
      [class.border-red-500]="getFieldError('description')"
    ></textarea>
    @if (getFieldError('description')) {
      <p class="mt-1 text-sm text-red-600">{{ getFieldError('description') }}</p>
    }
  </div>

  <!-- Actions -->
  <div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
    <button
      type="button"
      (click)="onCancelClick()"
      [disabled]="isLoading()"
      class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
    >
      Cancel
    </button>
    <button
      type="submit"
      [disabled]="isLoading() || form.invalid"
      class="px-4 py-2 text-sm font-medium text-white bg-gray-900 rounded-lg hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"
    >
      @if (isLoading()) {
        <svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Creating...
      } @else {
        Create Template
      }
    </button>
  </div>
</form>

